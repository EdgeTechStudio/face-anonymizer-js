<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/face_detection.js"
      crossorigin="anonymous"
    ></script>

    <style>
      body {
        background: black;
        color: #cccccc;
      }
      div {
        float: left;
        border: 1px solid #444444;
        padding: 10px;
        margin: 10px;
        background: #3b3b3b;
      }
    </style>
  </head>

  <body>
    <div>
      <video
        id="video"
        src="input/video.mp4"
        controls="true"
        width="1280"
        crossorigin="anonymous"
      ></video>
    </div>
    <div>
      <canvas id="c2" width="1280" height="720"></canvas>
    </div>
    <script type="text/javascript" src="processor.js"></script>
  </body>

  <!-- WASM module -->
  <!-- <script type="module">
    const videoElement = document.getElementsByClassName("input_video")[0];
    const canvasElement = document.getElementsByClassName("output_canvas")[0];
    const canvasCtx = canvasElement.getContext("2d");

    function onResults(results) {
      // Draw the overlays.
      canvasCtx.save();
      canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);
      canvasCtx.drawImage(
        results.image,
        0,
        0,
        canvasElement.width,
        canvasElement.height
      );

      if (results.detections.length > 0) {
        canvasCtx.filter = "blur(4px)";
        results.detections[0].boundingBox.height =
          results.detections[0].boundingBox.height + 0.03;
        results.detections[0].boundingBox.width =
          results.detections[0].boundingBox.width + 0.03;
        drawRectangle(canvasCtx, results.detections[0].boundingBox, {
          fillColor: "#c8c8c8",
        });

        // draw landmarks
        // drawLandmarks(canvasCtx, results.detections[0].landmarks, {
        //   color: "red",
        //   radius: 5,
        // });
      }
      canvasCtx.restore();
    }

    const faceDetection = new FaceDetection({
      locateFile: (file) => {
        return `https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.0/${file}`;
      },
    });
    faceDetection.setOptions({
      minDetectionConfidence: 0.55,
    });
    faceDetection.onResults(onResults);

    const camera = new Camera(videoElement, {
      onFrame: async () => {
        await faceDetection.send({ image: videoElement });
      },
      width: 1280,
      height: 720,
    });
    camera.start();
  </script> -->
</html>
